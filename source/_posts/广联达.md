---
title: 广联达
categories: 广联达
tags: 广联达-标签
comment: true
date: 2022-01-11 14:30:47
sidebar: true
# cover: /images/code-cover.png #封面图片
# video: #封面视频
#   src: src # 完整视频链接
#   poster: poster # 完整视频封面图链接
# photos: #文字头部图片
#   - /images/1063.png
#   - /images/cover-2.png
# # 短文
# layout: tweet
# icon: balloon

link_reprint: #转载链接
  -
    url: https://juejin.cn/post/7164635658084941837
    title: 转载自【掘金】
link_refer: #参考链接
  -
    url: https://juejin.cn/post/7164635658084941837
    title: 参考自【掘金】
# sticky: 100 #置顶
---

# 广联达账号注册
  [目前收费](https://bimface.com/pricing)
  [公有云服务收费细则](https://bimface.com/pricing-details)

> [账号注册](https://bimface.com/register#/) > [创建应用](https://bimface.com/user-console) > 上传文件
飒飒大苏打撒·
---asda
<!--more-->

#### 上传文件方式 【需要确认】

- 支持 BIMFACE 控制台发起上传文件
  - [控制台上传](https://bimface.com/user-console/service/document-management?appKey=m1RkXZkTYyMnOsHDPCKKpWhnl82qe3Xl&projectId=10000771032236&path=/)
- 支持服务端 API 发起上传文件 _前后端会存在一定工作量_
  - [接口 API](https://bimface.com/docs/model-service/v1/api-reference/file/uploadUsingPUT.html)

#### 上传文件后需要转换

> 转换需要参数

```js
  exportDrawing	是否转成矢量图纸	true, false	true
  exportPdf	是否导出pdf文件	true, false	false
  exportThumb	是否导出缩略图	true, false	true
  exportAxisGrids	解析轴网信息	{ "gridLines":["轴线所在图层"], "gridBubbles":["轴号所在图层"] }	空
  viewType
```

```json
{ "exportDrawing": true, "exportPdf": true, "exportThumb": true, "exportAxisGrids": null, "viewType": "2D" }
```

[文件转换](https://bimface.com/user-console/service/document-management?appKey=m1RkXZkTYyMnOsHDPCKKpWhnl82qe3Xl&projectId=10000771032236&path=/)

> 为了能够在 web 端实现模型和图纸的浏览，需要将文件转换为轻量化数据包，并提取文件数据上传到云端数据库进行结构化存储。

> 模型和图纸上传转换后，会生成 BIMFACE 定义的轻量化数据包，包含模型的几何数据和属性、空间等非几何信息。

#### View Token 【注意】

> **已完成转换的模型才有 viewToken** > [地址](https://bimface.com/docs/model-viewer/v1/developers-guide/view-token.html)

**若在 12 小时内没有任何调用，则该 View Token 失效**

#### 图纸拆分需要 【注意: 拆分非常耗时】

    - 需要先在服务端发起  成功了才能再前端获取

[接口 API](https://bimface.com/docs/model-service/v1/api-reference/api/createDrawingSplitUsingPUT.html)

前端获取使用 viewer2D.getDrawingFrame

#### 拆分后的子图绑定安心筑部位树

    - 手动绑定 工作量大 很繁琐
    - 自动绑定 比较依赖 图纸 需要图纸标识清楚 明了   不然文本无法对应

#### 在图纸上定位

    - 1  待定???
    - 2  图纸可跨端在线浏览：PC、App、PAD  一般支持
    - 3  批注 https://bimface.com/developer-jsdemo#821
        > 问题
        - 暂时发现无法适应缩放比例
    - 4 需要用到层级点击事件
      > [图纸批注点击事件](https://bimface.com/developer-jsdemo#1044)
      > [点击监听事件](https://bimface.com/developer-jsdemo#1021)

    - 5
      - 1. 相同【班组类别】在同一【图层】展示 【注意: 需要验证是能区分同一图层】

    - 6 待验证

> 本次使用到的一些
> https://www.base64encode.net/
> m1RkXZkTYyMnOsHDPCKKpWhnl82qe3Xl:M4SDWnPsXr3WEMOy7CvFCmYMgY37jxYw

获取 access_token: https://api.bimface.com/oauth2/token
拆分图纸: https://api.bimface.com/files/10000771071701/split

> 推荐使用谷歌
> https://bimface.com/docs/model-viewer/v1/developers-guide/function.html
